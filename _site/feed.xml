<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.2">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2023-11-22T14:21:09-08:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">ğŸ’ Hanâ€™s Generative AI Quest</title><subtitle>I chronicle my captivating journey through Generative AI, sharing insights,  breakthroughs, and learnings from my enthralling side projects in the field. 
</subtitle><entry><title type="html">Craft Your Own Kitchen Companion: Leveraging OpenAI Assistant, Image Generation, and Text-to-Speech for a Revolutionary Cooking Experience</title><link href="http://localhost:4000/chatbot/2023/11/21/assistant-api-playground.html" rel="alternate" type="text/html" title="Craft Your Own Kitchen Companion: Leveraging OpenAI Assistant, Image Generation, and Text-to-Speech for a Revolutionary Cooking Experience" /><published>2023-11-21T00:00:00-08:00</published><updated>2023-11-21T00:00:00-08:00</updated><id>http://localhost:4000/chatbot/2023/11/21/assistant-api-playground</id><content type="html" xml:base="http://localhost:4000/chatbot/2023/11/21/assistant-api-playground.html"><![CDATA[<h2 id="tldr">TL;DR</h2>
<p><img src="/assets/picture/2023_11_21_assistant_api_playground/cropped_image.png" alt="page_cover" /></p>

<p>OpenAI unveiled its <a href="https://platform.openai.com/docs/assistants/overview">Assistant API</a> during its very first developer conference-<a href="https://devday.openai.com/">OpenAI DevDay</a>. This marked a significant addition to the suite of tools and models available for building conversational AI, a domain in which Iâ€™ve been actively engaged.</p>

<p>Although I have used other frameworks, tools and models to build customized Assistant in the past (check out my previous posts  <a href="https://bearbearyu1223.github.io/chatbot/2023/07/31/food-qna-on-server-llm.html">Food QnA Chatbot : Help Answer Food Related Questions from Your Own Cookbook</a> and <a href="https://bearbearyu1223.github.io/chatbot/2023/08/14/food-qna-on-device-llm.html">Build On-Device QnA with LangChain and Llama2</a>), intrigued by the new capabilities of the Assistant API, I decided to integrate it into a new project. This sample project is a refreshed demonstration of a simple Cooking Assistant, leveraging not only the Assistant API but also incorporating additional functionalities such as <a href="https://platform.openai.com/docs/guides/text-to-speech">Text-to-Speech</a> and <a href="https://platform.openai.com/docs/guides/images?context=node">Image Generation</a>, showcasing a holistic approach to building conversational AI systems with only a few lines of code.</p>

<p>Get inspired by the latest from Open AI DevDay with my project on <a href="https://github.com/bearbearyu1223/assistant_api_playground"><img src="https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&amp;logo=github&amp;logoColor=white" alt="GitHub" /></a>? Ready to unleash your creativity? Start building your own generative AI-powered experience today, join the forefront of AI innovation, and let us make AI for everyone!</p>

<h2 id="the-crafted-product-experience">The Crafted Product Experience</h2>

<ol>
  <li><strong>Direct Communication</strong>:
    <ul>
      <li>Purposefully address user (in this case, it will be â€œHanâ€) directly in all correspondences, ensuring each interaction is clear and personalized.</li>
    </ul>
  </li>
  <li><strong>Resource Utilization</strong>:
    <ul>
      <li>Utilize information solely from userâ€™s provided cookbooks when responding to his/her inquiries, ensuring responses are relevant and accurate.</li>
    </ul>
  </li>
  <li><strong>Requests for Visual Representation</strong>:
    <ul>
      <li><strong>Initial Acknowledgment</strong>: When user requests a visual representation of a recipe, promptly reply with: â€œAbsolutely! A delightful visual preview of the recipe is coming up shortly. Please hold on!â€</li>
      <li><strong>Action Step</strong>: Subsequently, craft a detailed and imaginative textual prompt to aid in visualizing the specified recipe.</li>
    </ul>
  </li>
  <li><strong>Recipe Responses</strong>:
    <ul>
      <li><strong>Introduction</strong>: Initiate responses to recipe queries with: â€œHereâ€™s a recipe I discovered!â€</li>
      <li><strong>Summary Style</strong>: Summarize the recipe succinctly using bullet points for easy comprehension.</li>
      <li><strong>Summary Length</strong>: Aim to keep the summary under 150 words to maintain brevity and focus.</li>
    </ul>
  </li>
  <li><strong>Handling Limitations and Concluding Respectfully</strong>:
    <ul>
      <li><strong>Addressing Unavailability</strong>: If userâ€™s questions cannot be resolved with the cookbooks at hand, or if an appropriate recipe is not available, inform the user politely about these constraints.</li>
      <li><strong>Concluding Interactions</strong>: End conversations with respect and professionalism, ensuring a positive and courteous closure.</li>
    </ul>
  </li>
</ol>

<h2 id="set-up-the-development-environment">Set Up the Development Environment</h2>

<p>The provided sample project on <a href="https://github.com/bearbearyu1223/assistant_api_playground">GitHub</a> acts as a prototype to illustrate the product experience described previously. Follow these steps to set up your local development environment:</p>

<ol>
  <li><strong>Clone the Sample Project</strong>: Use the following command to clone the project from GitHub:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/bearbearyu1223/assistant_api_playground
</code></pre></div>    </div>
  </li>
  <li><strong>Create a Virtual Environment</strong>: Navigate to the cloned project directory and create a Python virtual environment named <code class="language-plaintext highlighter-rouge">cooking_assistant</code> by executing:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 <span class="nt">-m</span> venv cooking_assistant
</code></pre></div>    </div>
  </li>
  <li><strong>Activate the Virtual Environment</strong>: Activate the newly created virtual environment with:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source </span>cooking_assistant/bin/activate
</code></pre></div>    </div>
  </li>
  <li><strong>Install Required Libraries</strong>: Inside the activated virtual environment, install the required libraries using the command:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 <span class="nb">install</span> <span class="nt">-r</span> requirements.txt
</code></pre></div>    </div>
  </li>
  <li><strong>Set Up Environment Variables</strong>: Create a <code class="language-plaintext highlighter-rouge">.env</code> file in the project root directory. Add your OpenAI API key to the file as follows:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>OPENAI_API_KEY=&lt;Your API KEY&gt;
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="run-the-application">Run the Application</h2>
<p>Simply add your own cookbook in PDF under the directory <code class="language-plaintext highlighter-rouge">cookbook</code>, or just play with the existing cookbook uploaded with my sample project. Engage with the project interactively by issuing food preparation and cooking queries. Initiate the application with the following command:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python main.py
</code></pre></div></div>
<p>To terminate the program, simply use <code class="language-plaintext highlighter-rouge">Ctrl + C</code>. Below is an example of a conversation generated by running the application.</p>

<table>
  <thead>
    <tr>
      <th>Turn ID</th>
      <th>User Query</th>
      <th>Assistant Response</th>
      <th>TTS Playback</th>
      <th>Notes on Tested User Query</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>ğŸ‘©ğŸ»â€ğŸ³: Hi there, Thanksgiving is coming! I would like to have some ideas for cooking!</td>
      <td>ğŸ”®: Thanksgiving is a great occasion to prepare a feast. Here are some main dish ideas inspired by the contents of the â€œDeliciously Healthy Dinnersâ€ cookbook that could suit a Thanksgiving dinner: [Main dishes listed]</td>
      <td><video src="https://github.com/bearbearyu1223/assistant_api_playground/assets/7468124/06aaa9e8-9833-48a9-950e-95b8f9494c90" controls="control"></video></td>
      <td>This query is designed to evaluate the clarity of the Assistantâ€™s defined role and the effectiveness of its execution, specifically in tasks such as generating creative ideas for holiday cooking.</td>
    </tr>
    <tr>
      <td>1</td>
      <td>ğŸ‘©ğŸ»â€ğŸ³: How to make Cornbread-Crusted Turkey?</td>
      <td>ğŸ”®: Hereâ€™s a recipe I found for Cornbread-Crusted Turkey from your cookbook: [Recipe details]</td>
      <td><video src="https://github.com/bearbearyu1223/assistant_api_playground/assets/7468124/cb672f77-e66d-46cd-bcff-7a8abb1a834c" controls="control"></video></td>
      <td>This query seeks to assess the Assistantâ€™s ability to accurately extract relevant information from the userâ€™s cookbook and succinctly summarize it.</td>
    </tr>
    <tr>
      <td>2</td>
      <td>ğŸ‘©ğŸ»â€ğŸ³: Thanks, what kind of salad will pair nicely with it?</td>
      <td>ğŸ”®: An Autumn Salad would pair nicely with Cornbread-Crusted Turkey. Hereâ€™s the recipe from your cookbook: [Recipe details]</td>
      <td><video src="https://github.com/bearbearyu1223/assistant_api_playground/assets/7468124/cc4b66e0-b158-419e-bd5d-98946fe21404" controls="control"></video></td>
      <td>This query is intended to assess the Assistantâ€™s ability to provide useful responses to related follow-up questions</td>
    </tr>
    <tr>
      <td>3</td>
      <td>ğŸ‘©ğŸ»â€ğŸ³: Can I see a visual of the autumn salad with the cornbread crusted turkey?</td>
      <td>ğŸ”®: Absolutely! Prepare for a delightful visual preview of the recipe, coming up shortly. Please hold on!</td>
      <td><video src="https://github.com/bearbearyu1223/assistant_api_playground/assets/7468124/1f1765bc-206f-4eed-afa6-d860965ad25c" controls="control"></video></td>
      <td>This query aims to evaluate the Assistantâ€™s ability to create visualizations based on recipe information previously requested by the user.</td>
    </tr>
    <tr>
      <td>Â </td>
      <td>Â </td>
      <td>See the visual representation generated from the Assistant via DALL-E-3 based on the textual prompt generated from GPT4: Envision a warm, inviting plate centered with a golden-brown Cornbread-Crusted Turkey fillet, its crunchy exterior hinting at the tender, juicy meat within; Next to it lies a vibrant and colorful Autumn Salad, a bed of mixed lettuce greens punctuated by the bold reds of dried cranberries and the crisp green of thinly sliced Granny Smith apples; Scattered on top are earthy, chopped walnuts and the delicate shimmer of unsalted sunflower seeds, offering both texture and taste; The salad glistens lightly, dressed in a delicate sheen of low-fat raspberry vinaigrette, complementing the robust flavors of the turkey; The plate is a harmonious blend of the heartiness of Thanksgiving and the freshness of autumn, a celebration of both comfort and zest on the palate. <img src="/assets/picture/2023_11_21_assistant_api_playground/recipe_image.png" alt="recipe_image" /></td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td>4</td>
      <td>ğŸ‘©ğŸ»â€ğŸ³: Oh that is very nice. How many calories per serving, including the autumn salad and the cornbread crusted turkey?</td>
      <td>ğŸ”®: The combined total calories per serving for the Autumn Salad and the Cornbread-Crusted Turkey is 395 calories.</td>
      <td><video src="https://github.com/bearbearyu1223/assistant_api_playground/assets/7468124/b87b3eea-786b-4557-b216-66d3acc42d9e" controls="control"></video></td>
      <td>This query is designed to assess the Assistantâ€™s proficiency in extracting information, applying logical reasoning, and performing basic mathematical calculations.</td>
    </tr>
    <tr>
      <td>5</td>
      <td>ğŸ‘©ğŸ»â€ğŸ³: Can you give me a breakdown of how the total calories per serving is calculated?</td>
      <td>ğŸ”®: Certainly! Hereâ€™s the breakdown of how the total calories per serving is calculated for the combination of Autumn Salad and Cornbread-Crusted Turkey: [Calorie breakdown]</td>
      <td><video src="https://github.com/bearbearyu1223/assistant_api_playground/assets/7468124/03bad1bd-e575-4ba2-8958-460298c24993" controls="control"></video></td>
      <td>More evaluations on the Assistantâ€™s logical reasoning and mathematical skills.</td>
    </tr>
    <tr>
      <td>6</td>
      <td>ğŸ‘©ğŸ»â€ğŸ³: Nice. Can you help me create a grocery list for making the autumn salad and the cornbread crusted turkey?</td>
      <td>ğŸ”®: Absolutely, hereâ€™s your grocery list for making the Autumn Salad and the Cornbread-Crusted Turkey: [Grocery list details]</td>
      <td><video src="https://github.com/bearbearyu1223/assistant_api_playground/assets/7468124/9b6b07a1-4fc0-4608-9cdb-150b87a0f387" controls="control"></video></td>
      <td>This query aims to evaluate the Assistantâ€™s ability to comprehend and summarize information based on its previous conversation history with the user.</td>
    </tr>
    <tr>
      <td>7</td>
      <td>ğŸ‘©ğŸ»â€ğŸ³: Thank you! Happy Thanksgiving!</td>
      <td>ğŸ”®: Youâ€™re welcome! If you need any more help in the future, feel free to reach out. Have a wonderful Thanksgiving and enjoy your delicious meal!</td>
      <td><video src="https://github.com/bearbearyu1223/assistant_api_playground/assets/7468124/ed240241-2220-4d36-9516-60b5104e1db1" controls="control"></video></td>
      <td>Assess whether the Assistant can respond politely and meaningfully to the userâ€™s casual conversation.</td>
    </tr>
  </tbody>
</table>]]></content><author><name>[&quot;Han Yu&quot;]</name></author><category term="chatbot" /><summary type="html"><![CDATA[TL;DR]]></summary></entry><entry><title type="html">Conversation Simulation : Watch AI Buddies Spark Conversations!</title><link href="http://localhost:4000/chatbot/2023/09/07/conversation-sim.html" rel="alternate" type="text/html" title="Conversation Simulation : Watch AI Buddies Spark Conversations!" /><published>2023-09-07T00:00:00-07:00</published><updated>2023-09-07T00:00:00-07:00</updated><id>http://localhost:4000/chatbot/2023/09/07/conversation-sim</id><content type="html" xml:base="http://localhost:4000/chatbot/2023/09/07/conversation-sim.html"><![CDATA[<h3 id="tldr">TL;DR</h3>
<p>This project is a demonstration of a simple conversational simulation environment, powered by LLM agents. It takes inspiration from <a href="https://github.com/chatarena/chatarena">ChatArena</a>. The main objective here is to enable conversation simulations through LLM agents (e.g., the converstation can be task-oriented or just a chitchat). To accomplish this, the frameworks and concepts originally developed in ChatArena has been leveraged and tailored specifically for this conversational simulation experiment. 
 More information can be found on <a href="https://github.com/bearbearyu1223/Multi-Agents-Simulation-Powered-by-LLMs"><img src="https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&amp;logo=github&amp;logoColor=white" alt="GitHub" /></a>.</p>

<h3 id="set-up-local-virtual-environment">Set Up Local Virtual Environment</h3>
<ul>
  <li>Step 1: Install Miniconda on MacOS, see instruction <a href="https://docs.conda.io/en/latest/miniconda.html">here</a>.</li>
  <li>Step 2: Create a default conda env with Python 3.10: 
<code class="language-plaintext highlighter-rouge">conda create --name agent_sim python=3.10 -y</code></li>
  <li>Step 3: Activate the conda env created above: 
<code class="language-plaintext highlighter-rouge">conda activate agent_sim</code></li>
  <li>Step 4: Install required libraries in the conda env:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install -r requirements.txt
</code></pre></div>    </div>
  </li>
  <li>Step 5: Deactivate the conda env when you are done (note: you need activate this virtual env to work on the app)
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda deactivate 
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="set-up-open-ai-secrete-for-local-dev">Set Up Open AI Secrete for Local Dev</h3>
<p><code class="language-plaintext highlighter-rouge">OPENAI_API_KEY</code> will be needed when calling the OpenAI API endpoints (DEFAULT_MODEL used in this project is â€œgpt-3.5-turboâ€), so do recommend exporting <code class="language-plaintext highlighter-rouge">OPENAI_API_KEY</code> as an enviroment variable on your local dev machine.</p>

<h3 id="run-the-simulation">Run the Simulation</h3>
<p>You can play with any examples under the <code class="language-plaintext highlighter-rouge">examples</code> folder and run the converstation simulation in an interactive mode:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python examples/example_food_qna_zh_CN.py 
</code></pre></div></div>

<p>In this example, â€œCrystalâ€ is utilizing an AI assistant named â€œNovaâ€ to brainstorm ideas for a fast and nutritious school lunch for her daughter. â€œEllaâ€ serves as a â€œmoderatorâ€ responsible for evaluating whether the conversations between Nancy and Nova adhere to the following rules for termination:</p>

<ul>
  <li>The conversation can conclude if Nova successfully fulfills all of Crystalâ€™s requests, and Crystal expresses satisfaction with Novaâ€™s assistance.</li>
  <li>The conversation can also end if Nova is unable to fulfill Crystalâ€™s requests.</li>
</ul>

<p>If Ella believes the conversation should conclude, she will state â€œÂ«Â«Â«END_OF_CONVERSATIONÂ»Â»Â»â€; otherwise, she will say â€œconverstation can continueâ€.</p>

<p>Please refer to the screenshot below for an illustration of the simulation results.<img src="/assets/picture/2023_09_07_conversation_sim/2023_09_07_conversation_sim.png" alt="example_1" /></p>

<p>Once simulation ends, one can save the converstation history as a json file. See a sample json file below:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[
    {
        "agent_name": "Crystal",
        "content": "å—¨ï¼ŒNovaï¼æˆ‘éœ€è¦ä¸€äº›å…³äºä¸ºæˆ‘å¥³å„¿å‡†å¤‡å¥åº·åˆé¤çš„å»ºè®®ã€‚å¥¹ç°åœ¨7å²ï¼Œæˆ‘å¸Œæœ›èƒ½ç»™å¥¹æä¾›å¿«é€Ÿä½†è¥å…»ä¸°å¯Œçš„é€‰é¡¹ã€‚ä½ æœ‰ä»€ä¹ˆå»ºè®®å—ï¼Ÿ",
        "turn": 0,
        "timestamp": "1694143996023456000",
        "visible_to": "all",
        "msg_type": "text"
    },
    {
        "agent_name": "Nova",
        "content": "å—¨ï¼ŒCrystalï¼ä¸ºäº†ç»™ä½ çš„å¥³å„¿æä¾›å¿«é€Ÿåˆè¥å…»ä¸°å¯Œçš„åˆé¤ï¼Œæˆ‘æœ‰å‡ ä¸ªå»ºè®®ã€‚é¦–å…ˆï¼Œä½ å¯ä»¥è€ƒè™‘ç»™å¥¹æä¾›ä¸€ä»½å‡è¡¡çš„ä¸‰æ˜æ²»ï¼Œé‡Œé¢åŒ…å«è”¬èœã€è›‹ç™½è´¨å’Œå…¨éº¦é¢åŒ…ã€‚ä½ è¿˜å¯ä»¥æ·»åŠ ä¸€äº›æ°´æœæˆ–é…¸å¥¶ä½œä¸ºä¼´ä¾£ã€‚å¦å¤–ï¼Œä½ å¯ä»¥å°è¯•åˆ¶ä½œä¸€äº›å¥åº·çš„å°åƒï¼Œä¾‹å¦‚è”¬èœåˆ‡ç‰‡æ­é…èŠ±ç”Ÿé…±æˆ–è€…é…¸å¥¶è˜¸é…±ã€‚å¦‚æœä½ æƒ³è®©å¥¹å¤šæ‘„å…¥è›‹ç™½è´¨ï¼Œå¯ä»¥è€ƒè™‘ç»™å¥¹å‡†å¤‡ä¸€ä»½é¸¡è‚‰æˆ–é±¼è‚‰é…ç±³é¥­å’Œè”¬èœã€‚æœ€åï¼Œè®°å¾—ç»™å¥¹æä¾›ä¸€æ¯ç‰›å¥¶æˆ–æ°´æ¥ä¿æŒæ°´åˆ†è¡¥å……ã€‚å¸Œæœ›è¿™äº›å»ºè®®å¯¹ä½ æœ‰å¸®åŠ©ï¼å¦‚æœä½ è¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚",
        "turn": 0,
        "timestamp": "1694144002581689000",
        "visible_to": "all",
        "msg_type": "text"
    },
    {
        "agent_name": "Ella",
        "content": "continue",
        "turn": 1,
        "timestamp": "1694144025822335000",
        "visible_to": "all",
        "msg_type": "text"
    },
    {
        "agent_name": "Crystal",
        "content": "è°¢è°¢ä½ çš„å»ºè®®ï¼ŒNovaï¼è¿™äº›éƒ½æ˜¯å¾ˆä¸é”™çš„é€‰æ‹©ã€‚æˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œæœ‰æ²¡æœ‰ä¸€äº›ç®€å•çš„å¥åº·åˆé¤é£Ÿè°±ï¼Œå¯ä»¥è®©æˆ‘åœ¨å®¶åšå¹¶å¸¦ç»™æˆ‘çš„å¥³å„¿ï¼Ÿæˆ‘æƒ³ç¡®ä¿å¥¹åƒçš„ä¸œè¥¿æ–°é²œåˆå¥åº·ã€‚ä½ æœ‰ä»€ä¹ˆå»ºè®®å—ï¼Ÿ",
        "turn": 2,
        "timestamp": "1694144032890695000",
        "visible_to": "all",
        "msg_type": "text"
    },
    {
        "agent_name": "Nova",
        "content": "å½“ç„¶ï¼Œæˆ‘å¯ä»¥ç»™ä½ ä¸€äº›ç®€å•çš„å¥åº·åˆé¤é£Ÿè°±ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå»ºè®®ï¼š\n\n1. è”¬èœå¯¿å¸å·ï¼šç”¨ç´«èœã€ç³™ç±³ã€é³—é±¼ã€é»„ç“œå’Œèƒ¡èåœå·èµ·æ¥åšæˆå¯¿å¸å·ã€‚åˆ‡æˆå°æ®µï¼Œè¿™æ˜¯ä¸€ä¸ªæ–¹ä¾¿æºå¸¦çš„åˆé¤é€‰æ‹©ã€‚\n\n2. é¸¡è‚‰æ²™æ‹‰ä¸‰æ˜æ²»ï¼šå°†çƒ¤é¸¡èƒ¸è‚‰åˆ‡æˆè–„ç‰‡ï¼ŒåŠ å…¥è”¬èœï¼ˆä¾‹å¦‚ç”Ÿèœã€ç•ªèŒ„å’Œé»„ç“œï¼‰ï¼Œç”¨å…¨éº¦é¢åŒ…åšæˆä¸‰æ˜æ²»ã€‚å¯ä»¥é…ä»¥ä½è„‚é…¸å¥¶æˆ–è€…è”¬èœç‰‡ã€‚\n\n3. å½©è™¹è‰²è”¬èœé¥¼ï¼šå°†èƒ¡èåœã€è¥¿å…°èŠ±ã€æ´‹è‘±å’Œç‰ç±³æ··åˆåœ¨ä¸€èµ·ï¼ŒåŠ å…¥è›‹æ¶²å’Œé¢ç²‰ï¼Œç…æˆå°é¥¼ã€‚è¿™æ˜¯ä¸€ä¸ªå¿«é€Ÿåˆå¥åº·çš„åˆé¤é€‰æ‹©ã€‚\n\n4. æ°´æœæ²™æ‹‰ï¼šåˆ‡ç¢ä¸€äº›æ–°é²œæ°´æœï¼Œä¾‹å¦‚è‹¹æœã€è‰è“ã€è“è“å’Œé¦™è•‰ã€‚å¯ä»¥åŠ å…¥ä¸€äº›åšæœæˆ–è€…é…¸å¥¶ä½œä¸ºè°ƒå‘³å“ã€‚\n\nè¿™äº›éƒ½æ˜¯ç®€å•è€Œå¥åº·çš„åˆé¤é€‰æ‹©ï¼Œä½ å¯ä»¥æ ¹æ®ä½ å¥³å„¿çš„å£å‘³å’Œå–œå¥½è¿›è¡Œè°ƒæ•´ã€‚å¸Œæœ›è¿™äº›å»ºè®®èƒ½ç»™ä½ ä¸€äº›çµæ„Ÿï¼å¦‚æœä½ éœ€è¦æ›´å¤šé£Ÿè°±æˆ–æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚",
        "turn": 2,
        "timestamp": "1694144054290083000",
        "visible_to": "all",
        "msg_type": "text"
    },
    {
        "agent_name": "Ella",
        "content": "continue",
        "turn": 3,
        "timestamp": "1694144059307035000",
        "visible_to": "all",
        "msg_type": "text"
    },
    {
        "agent_name": "Crystal",
        "content": "è°¢è°¢ä½ çš„å»ºè®®ï¼ŒNovaï¼è¿™äº›é£Ÿè°±å¬èµ·æ¥å¾ˆæ£’ï¼Œæˆ‘ä¼šå°è¯•åˆ¶ä½œå®ƒä»¬ã€‚æˆ‘è¿˜æƒ³é—®ä¸€ä¸‹ï¼Œæœ‰æ²¡æœ‰ä¸€äº›å¥åº·çš„é›¶é£Ÿé€‰é¡¹ï¼Œæˆ‘å¯ä»¥ç»™æˆ‘çš„å¥³å„¿æ”¾è¿›å¥¹çš„åˆé¤ç›’é‡Œï¼Ÿæˆ‘å¸Œæœ›èƒ½ç»™å¥¹ä¸€äº›æœ‰è¥å…»ä½†åˆå®¹æ˜“æºå¸¦çš„é›¶é£Ÿã€‚ä½ æœ‰ä»€ä¹ˆå»ºè®®å—ï¼Ÿ",
        "turn": 4,
        "timestamp": "1694144062870150000",
        "visible_to": "all",
        "msg_type": "text"
    },
    {
        "agent_name": "Nova",
        "content": "å½“ç„¶ï¼Œæˆ‘å¯ä»¥ç»™ä½ ä¸€äº›å¥åº·çš„é›¶é£Ÿé€‰é¡¹ï¼Œé€‚åˆä½ å¥³å„¿çš„åˆé¤ç›’ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå»ºè®®ï¼š\n\n1. è”¬èœæ£’å’Œé…¸å¥¶è˜¸é…±ï¼šå°†èƒ¡èåœã€é»„ç“œå’ŒèŠ¹èœåˆ‡æˆæ¡çŠ¶ï¼Œæ­é…ä½è„‚é…¸å¥¶æˆ–è€…èŠ±ç”Ÿé…±ä½œä¸ºè˜¸é…±ã€‚è¿™æ˜¯ä¸€ä¸ªè½»æ¾æºå¸¦çš„è¥å…»é›¶é£Ÿã€‚\n\n2. æ°´æœä¸²ï¼šå°†å„ç§æ°´æœï¼ˆä¾‹å¦‚è‘¡è„ã€è“è“ã€è‰è“ç­‰ï¼‰ç©¿åœ¨ç«¹ç­¾ä¸Šï¼Œåˆ¶ä½œæˆæ°´æœä¸²ã€‚è¿™æ˜¯ä¸€ä¸ªæ–¹ä¾¿åƒåˆæœ‰è¶£çš„é›¶é£Ÿé€‰æ‹©ã€‚\n\n3. åšæœå’Œå¹²æœæ··åˆï¼šå°†åšæœï¼ˆä¾‹å¦‚æä»ã€æ ¸æ¡ƒï¼‰å’Œå¹²æœï¼ˆä¾‹å¦‚è‘¡è„å¹²ã€æ— èŠ±æœï¼‰æ··åˆåœ¨ä¸€èµ·ï¼Œåˆ¶ä½œæˆå°è¢‹å­ã€‚è¿™æ˜¯ä¸€ä¸ªé«˜èƒ½é‡å’Œè¥å…»ä¸°å¯Œçš„é›¶é£Ÿã€‚\n\n4. é…¸å¥¶æ¯ï¼šå°†ä½è„‚é…¸å¥¶åŠ å…¥ä¸€äº›æ–°é²œæ°´æœå’Œè°·ç‰©ï¼ˆä¾‹å¦‚ç‡•éº¦ç‰‡ã€åšæœï¼‰ï¼Œæ”¾å…¥ä¸€ä¸ªå¯†å°æ¯ä¸­ã€‚è¿™æ˜¯ä¸€ä¸ªè½»æ¾æºå¸¦çš„å¥åº·é›¶é£Ÿã€‚\n\nè®°ä½ï¼Œåœ¨é€‰æ‹©é›¶é£Ÿæ—¶ï¼Œå°½é‡é€‰æ‹©ä½ç³–å’Œä½ç›çš„é€‰é¡¹ï¼Œå¹¶æ³¨æ„æ§åˆ¶é£Ÿç”¨é‡ã€‚å¸Œæœ›è¿™äº›å»ºè®®èƒ½ç»™ä½ ä¸€äº›çµæ„Ÿï¼å¦‚æœä½ è¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚",
        "turn": 4,
        "timestamp": "1694144078840960000",
        "visible_to": "all",
        "msg_type": "text"
    },
    {
        "agent_name": "Ella",
        "content": "&lt;&lt;&lt;&lt;&lt;&lt;END_OF_CONVERSATION&gt;&gt;&gt;&gt;&gt;&gt;",
        "turn": 5,
        "timestamp": "1694144091154109000",
        "visible_to": "all",
        "msg_type": "text"
    }
]
</code></pre></div></div>

<p>Feel free to create a new example and try to experiment with it further! Have fun ã‹¡ ~</p>]]></content><author><name>[&quot;Han Yu&quot;]</name></author><category term="chatbot" /><summary type="html"><![CDATA[TL;DR This project is a demonstration of a simple conversational simulation environment, powered by LLM agents. It takes inspiration from ChatArena. The main objective here is to enable conversation simulations through LLM agents (e.g., the converstation can be task-oriented or just a chitchat). To accomplish this, the frameworks and concepts originally developed in ChatArena has been leveraged and tailored specifically for this conversational simulation experiment. More information can be found on .]]></summary></entry><entry><title type="html">Build On-Device QnA with LangChain and Llama2</title><link href="http://localhost:4000/chatbot/2023/08/14/food-qna-on-device-llm.html" rel="alternate" type="text/html" title="Build On-Device QnA with LangChain and Llama2" /><published>2023-08-14T00:00:00-07:00</published><updated>2023-08-14T00:00:00-07:00</updated><id>http://localhost:4000/chatbot/2023/08/14/food-qna-on-device-llm</id><content type="html" xml:base="http://localhost:4000/chatbot/2023/08/14/food-qna-on-device-llm.html"><![CDATA[<h3 id="tldr">TL;DR</h3>
<p>This post involves creating a Question and Answering system using the LLM model hosted on Apple M1 Pro. The key building blocks include the LLM model (<a href="https://huggingface.co/TheBloke/Llama-2-7B-Chat-GGML">llama-2-7b-chat.ggmlv3.q8_0.bin</a>), an embedding model (<a href="https://huggingface.co/sentence-transformers/all-MiniLM-L6-v2">sentence-transformers/all-MiniLM-L6-v2</a>), and an on-device vector database (<a href="https://github.com/facebookresearch/faiss">FAISS</a>). The app is built using the â€œLangChainâ€ framework. All components are open source, eliminating the need for OpenAI services. The systemâ€™s performance is similar to OpenAI but with 10x longer latency (around 60s/query vs 5s/query) due to on-device model inference.</p>

<h3 id="introduction">Introduction</h3>
<p>Third-party commercial large language model (LLM) providers, such as OpenAIâ€™s GPT-4, Google Bard, and Amazon AlexaTM, have greatly democratized access to LLM capabilities through seamless API integration and scalable model inference hosting in the cloud. These advanced LLMs possess the remarkable ability to <strong>comprehend</strong>, <strong>learn from</strong>, and <strong>produce text</strong> that is nearly indistinguishable from human-generated content. Beyond their text generation prowess, these LLMs excel in <strong>interactive conversations</strong>, <strong>question answering</strong>, <strong>dialogue</strong> and <strong>document summarization</strong>, as well as <strong>offering insightful recommendations</strong>. Their versatility finds applications across diverse tasks and industries including creative copywriting for marketing, precise document summarization for legal purposes, data-driven market research in the financial sector, realistic simulation of clinical trials within healthcare, and even code generation for software development.</p>

<p>However, certain scenarios, driven by an increasing emphasis on safeguarding data privacy and adhering to stringent regulatory compliance standards, highlight the necessity of deploying LLMs on private hardware devices instead of on any of those third-party owned servers. In such instances, <strong>maintaining sensitive information within the confines of the userâ€™s hardware</strong> not only mitigates the risks associated with data breaches and unauthorized access but also aligns with the evolving landscape of privacy-conscious technical practices. This approach <strong>fosters a sense of trust among users who are becoming more attuned to the importance of maintaining their personal information within their own environments</strong>.</p>

<p>In this post, our focus lies in exploring the execution of quantized variants of open-source Llama2 models on local devices to achieve Retrieval Augmented Generation (RAG). For RAG powered by server-side LLMs, you can find more info in <a href="https://bearbearyu1223.github.io/chatbot/2023/07/31/food-qna-on-server-llm.html">my previous post</a>.</p>

<h3 id="llama2-and-its-variants">Llama2 and Its variants</h3>
<p><a href="https://ai.meta.com/resources/models-and-libraries/llama/">Llama 2</a>, launched by Meta in July 2023, has been pretrained on publicly available online data sources, encompassing a staggering <strong>2 trillion tokens with a context length of 4096</strong>. The subsequent supervised fine-tuned iteration of this model, known as Llama-2-chat, underwent meticulous refinement through the integration of over <em>1 million human annotations</em> to cater specifically to <strong>chat-oriented use cases</strong>. Meta has extended the accessibility of Llama 2 to a wide spectrum of users, ranging from individual developers and content creators to researchers and businesses. This strategic open-source initiative is aimed at fostering an ecosystem conducive to <a href="https://ai.meta.com/static-resource/responsible-use-guide/">Responsible AI experimentation</a>, innovation, and the scalable implementation of a diverse array of ideas, thus further <strong>democratizing Generative AI</strong>.</p>

<p>Llama 2 is offered in an array of parameter sizes â€” 7B, 13B, and 70B â€” alongside both pretrained and fine-tuned variations to cater to a wide range of application needs.</p>

<h3 id="framework-and-libraries-used-langchain-ggml-c-transformers">Framework and Libraries Used: LangChain, GGML, C Transformers</h3>
<p><a href="https://python.langchain.com/docs/get_started/introduction.html">LangChain</a> is an open source framework for developing applications powered by LLMs. It goes beyond standard API calls by being <em>data-aware</em>, enabling connections with various data sources for richer, personalized experiences. It is also <em>agentic</em>, meaning it can empower a language model to interact dynamically with its environment. LangChain streamlines the development of diverse applications, such as chatbots, Generative Question and Answering (GQA), and summarization. By â€œchainingâ€ components from multiple modules, it allows for the creation of unique applications built around an LLM with <strong>easy-to-code</strong> and <strong>fast-to-production</strong> developer experience.</p>

<p><a href="https://github.com/ggerganov/ggml">GGML</a> is a C library for machine learning (ML). GGML makes use of a technique called <strong>â€œquantizationâ€</strong> (e.g., convert LLMâ€™s weights from high-precison floating numbers to low-precision floating numbers) that allows for large language models to run on consumer hardware. GGML supports a number of different quantization strategies (e.g. 4-bit, 5-bit, and 8-bit quantization), each of which offers different <em>trade-offs between efficiency and performance</em>. More information about these trade-offs (such as model disk size and inference speed) can be found in <a href="https://github.com/ggerganov/llama.cpp">the documentation for llama.cpp</a>.</p>

<p><a href="https://github.com/marella/ctransformers">C Transformers</a> is a wrapper that provides the Python bindings for the Transformer models implemented in C/C++ using GGML. 
C Transformers supports running Llama2 model inference via GPU, for both NVIDIA GPU (via CUDA, a programming language for NVIDIA GPUs) and Appleâ€™s own integreated GPU and Neural Engine (via Metal, a programming language for Apple integrated GPUs).</p>

<p>Note: To use C transformers with Metal Support for model inference running on Apple M1/M2 chip, need run the following cmd under your project root</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry config --local installer.no-binary ctransformers

poetry add ctransformers 
</code></pre></div></div>

<h3 id="retrieval-augmented-generation">Retrieval Augmented Generation</h3>
<p>Retrieval Augmented Generation (RAG) represents a technique wherein data is retrieved from external sources to enhance and expand the prompts used in model generation. This method is not only a cost-effective alternative but also proves to be an efficient approach in comparison to the traditional methods of pre-training or fine-tuning foundation models.
See the previous post at <a href="https://bearbearyu1223.github.io/chatbot/2023/07/31/food-qna-on-server-llm.html">Food QnA Chatbot : Help Answer Food Related Questions from Your Own Cookbook</a> as a brief into to RAG.</p>

<h3 id="an-example-project">An Example Project</h3>
<p>The source code for the example project can be found on <a href="https://github.com/bearbearyu1223/langchain_playground/tree/main/food_qna_on_device"><img src="https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&amp;logo=github&amp;logoColor=white" alt="GitHub" /></a>. The project directory should look like below:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>food_qna_on_device
â”œâ”€â”€ README.md
â”œâ”€â”€ build_knowledge_base.py
â”œâ”€â”€ config.py
â”œâ”€â”€ cook_book_data
â”‚   â”œâ”€â”€ GCE-Dinner-in-30-EXPANDED-BLAD.pdf
â”‚   â”œâ”€â”€ Quick-Easy-Weeknight-Meals-1.pdf
â”‚   â””â”€â”€ dinners_cookbook_508-compliant.pdf
â”œâ”€â”€ main.py
â”œâ”€â”€ models
â”‚   â”œâ”€â”€ llama-2-13b-chat.ggmlv3.q8_0.bin
â”‚   â””â”€â”€ llama-2-7b-chat.ggmlv3.q8_0.bin
â”œâ”€â”€ poetry.lock
â”œâ”€â”€ poetry.toml
â”œâ”€â”€ pyproject.toml
â””â”€â”€ vector_db
    â”œâ”€â”€ index.faiss
    â””â”€â”€ index.pkl
</code></pre></div></div>

<p>Instruction to run the example project:</p>
<ul>
  <li>Step 1: Launch the terminal from the project directory, install and resolve the dependencies as defined in <code class="language-plaintext highlighter-rouge">pyproject.toml</code> file via
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry install
</code></pre></div>    </div>
  </li>
  <li>Step 2: Download the quantized 7b model <code class="language-plaintext highlighter-rouge">llama-2-7b-chat.ggmlv3.q8_0.bin</code> from https://huggingface.co/TheBloke/Llama-2-7B-Chat-GGML and save the model under the directory <code class="language-plaintext highlighter-rouge">models\</code></li>
  <li>Step 3: To start parsing user queries into the application, run the following command from the project directory (note: the model inference can take ~1 mins per input query)
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run python main.py -c local 
</code></pre></div>    </div>
    <p>Optionally, to run the same query with OpenAI (note: the model inference will take a few seconds per input query, you will also need export OPENAI_API_KEY as an enviroment variable on your local dev machine)</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run python main.py -c server
</code></pre></div>    </div>
  </li>
  <li>Step 4: Enter a query related to food preparation and cooking into the console and start playing with it. 
See an example below:
Screenshot of the original content for making â€œPumpkin Biscuitsâ€. 
 <img src="/assets/picture/2023_08_14_food_qna_on_device_llm/original.png" alt="Original Content" />
Retrieval Augmented Generation by running Llama2 model inference on local device
 <img src="/assets/picture/2023_08_14_food_qna_on_device_llm/response.png" alt="Response" /></li>
</ul>]]></content><author><name>[&quot;Han Yu&quot;]</name></author><category term="chatbot" /><summary type="html"><![CDATA[TL;DR This post involves creating a Question and Answering system using the LLM model hosted on Apple M1 Pro. The key building blocks include the LLM model (llama-2-7b-chat.ggmlv3.q8_0.bin), an embedding model (sentence-transformers/all-MiniLM-L6-v2), and an on-device vector database (FAISS). The app is built using the â€œLangChainâ€ framework. All components are open source, eliminating the need for OpenAI services. The systemâ€™s performance is similar to OpenAI but with 10x longer latency (around 60s/query vs 5s/query) due to on-device model inference.]]></summary></entry><entry><title type="html">Food QnA Chatbot : Help Answer Food Related Questions from Your Own Cookbook</title><link href="http://localhost:4000/chatbot/2023/07/31/food-qna-on-server-llm.html" rel="alternate" type="text/html" title="Food QnA Chatbot : Help Answer Food Related Questions from Your Own Cookbook" /><published>2023-07-31T00:00:00-07:00</published><updated>2023-07-31T00:00:00-07:00</updated><id>http://localhost:4000/chatbot/2023/07/31/food-qna-on-server-llm</id><content type="html" xml:base="http://localhost:4000/chatbot/2023/07/31/food-qna-on-server-llm.html"><![CDATA[<h2 id="introduction">Introduction</h2>
<p>Retrieval Augmented Generation (RAG) is a powerful technique that allows you to enhance your prompts by retrieving data from external sources and incorporating it into the context. The external data used for augmentation can be gathered from diverse sources such as document repositories, databases, or web search results.</p>

<p>To begin with RAG, you need to convert your documents and user queries into a compatible format to perform relevancy search. This involves converting both the document collection, or knowledge base, and user-submitted queries into numerical representations using embedding. Embedding is a process that assigns numerical values to text, placing them in a vector space.</p>

<p>RAG model architectures then compare the embeddings of user queries with those â€œvector indexâ€ of the knowledge base. By doing so, they identify similar documents in the knowledge base that are relevant to the userâ€™s prompt. These relevant contents from similar documents are appended to the original user prompt.</p>

<p>Finally, the augmented prompt, which now includes the relevant retrieved content, is passed on to the foundation model to generate the final responses. This integration of retrieval and generation significantly improves the quality and relevance of the modelâ€™s outputs. Below is an illustrative diagram that demonstrates the overall RAG (Retrieval Augmented Generation) process. <img src="/assets/picture/2023_07_31_food_qna_on_server_llm/RAG.png" alt="Retrieval Augmented Generation" />.</p>

<h2 id="an-example-project-for-rag">An Example Project for RAG</h2>
<p>I have created an example project to provide a practical demonstration of how RAG works. For more detailed information and insights into the project, you can find comprehensive documentation and additional resources on <a href="https://github.com/bearbearyu1223/food_qna_powered_by_llm"><img src="https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&amp;logo=github&amp;logoColor=white" alt="GitHub" /></a>. This exmaple project will walk you through the RAG process, the data preparation steps, the relevancy search implementation, and how the augmented prompts lead to more contextually, more relevant, and more conversational responses from the foundation model. Please feel free to clone this project on GitHub, and follow the steps below to explore or develope it further.</p>

<h2 id="set-up-local-virtual-environment">Set Up Local Virtual Environment</h2>
<ul>
  <li>Step 1: Install Miniconda on MacOS, see instruction <a href="https://docs.conda.io/en/latest/miniconda.html">here</a>.</li>
  <li>Step 2: Create a default conda env with Python 3.9:
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda create <span class="nt">--name</span> food_qna_app <span class="nv">python</span><span class="o">=</span>3.9 <span class="nt">-y</span>
</code></pre></div>    </div>
  </li>
  <li>Step 3: Activate the conda env created above: 
<code class="language-plaintext highlighter-rouge">conda activate food_qna_app</code></li>
  <li>Step 4: Install first set of required libraries in the conda env:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install -r requirements.txt
</code></pre></div>    </div>
  </li>
  <li>Step 5: Deactivate the conda env when you are done (note: you need activate this virtual env to work on the app)
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda deactivate 
</code></pre></div>    </div>
    <h2 id="set-up-open-ai-secrete-for-local-dev">Set Up Open AI Secrete for Local Dev</h2>
    <p><code class="language-plaintext highlighter-rouge">OPENAI_API_KEY</code> will be needed when calling the OpenAI API endpoint for generating embeddings for the documents, so do recommend exporting <code class="language-plaintext highlighter-rouge">OPENAI_API_KEY</code> as an enviroment variable on your local dev machine; also, we will need create a <code class="language-plaintext highlighter-rouge">secrets.toml</code> file and add the <code class="language-plaintext highlighter-rouge">OPENAI_API_KEY</code> there, so the streamlit app can pick up the API key when send requests to OpenAI endpoint during runtime.</p>
  </li>
  <li>Step 1: Export <code class="language-plaintext highlighter-rouge">OPENAI_API_KEY</code> as an enviroment variable on your local dev machine</li>
  <li>Step 2: Create <code class="language-plaintext highlighter-rouge">.streamlit</code> directory under the root repo
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd food_qna_chatbot_demo 
mkdir .streamlit
</code></pre></div>    </div>
  </li>
  <li>Step 3: Create <code class="language-plaintext highlighter-rouge">secrets.toml</code> file under <code class="language-plaintext highlighter-rouge">.streamlit</code> directory and add your <code class="language-plaintext highlighter-rouge">OPENAI_API_KEY</code> there
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>OPENAI_API_KEY=&lt;YOUR_OPENAI_API_KEY_HERE&gt;
</code></pre></div>    </div>
  </li>
  <li>Step 4: To reduce the risk of accidentally committing your secrets to your repo, add <code class="language-plaintext highlighter-rouge">.streamlit</code> to your <code class="language-plaintext highlighter-rouge">.gitignore</code> file.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo ".streamlit/" &gt;&gt; .gitignore
</code></pre></div>    </div>
    <h2 id="set-up-the-redis-database-on-your-local-dev-machine">Set up the Redis Database on your local dev machine</h2>
  </li>
  <li>Step 1: <a href="https://docs.docker.com/desktop/install/mac-install/">Install Docker Desktop on Mac</a>, and start the docker desktop.</li>
  <li>Step 2: Weâ€™re going to use Redis as our database for both document contents and the vector embeddings. You will need the full Redis Stack to enable use of Redisearch, which is the module that allows semantic search - more detail is in the docs for <a href="https://redis.io/docs/stack/get-started/install/docker/">Redis Stack</a>. Run the following command in your terminal to start the docker container:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -d --name redis-stack -p 127.0.0.1:6379:6379 -p 8001:8001 redis/redis-stack:latest
</code></pre></div>    </div>
  </li>
  <li>Step 3: Initiate a Redis connection and create a Hierarchical Navigable Small World (HNSW) index for semantic search using a recipe book which can be found under the directory <code class="language-plaintext highlighter-rouge">cook_book_data</code>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python build_knowledge_base.py
</code></pre></div>    </div>
    <p>If the recipe book is indexed succefully into the DB, you should expect the following info printed out in the console:</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>===
Number of documents indexed in the DB: 144
</code></pre></div>    </div>
    <h2 id="run-the-app">Run the APP</h2>
    <p>In your terminal, run the App by</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>streamlit run food_qna_app.py
</code></pre></div>    </div>
    <p>You can start asking questions related to food preparation and cooking, and also some follow up questions. See screenshot below.</p>
  </li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Original Content</th>
      <th style="text-align: left">Chat History - first turn</th>
      <th style="text-align: left">Chat History - follow up</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><img src="/assets/picture/2023_07_31_food_qna_on_server_llm/original_content.png" alt="Original Content" /></td>
      <td style="text-align: left"><img src="/assets/picture/2023_07_31_food_qna_on_server_llm/chat_history_1.png" alt="Chat History" /></td>
      <td style="text-align: left"><img src="/assets/picture/2023_07_31_food_qna_on_server_llm/chat_history_2.png" alt="Chat History" /></td>
    </tr>
  </tbody>
</table>]]></content><author><name>[&quot;Han Yu&quot;]</name></author><category term="chatbot" /><summary type="html"><![CDATA[Introduction Retrieval Augmented Generation (RAG) is a powerful technique that allows you to enhance your prompts by retrieving data from external sources and incorporating it into the context. The external data used for augmentation can be gathered from diverse sources such as document repositories, databases, or web search results.]]></summary></entry></feed>